<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Integrated Navigation with Relationships Panel</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
            display: flex;
            height: 100vh;
        }
        
        /* Three-panel layout */
        .container {
            display: flex;
            width: 100%;
            height: 100%;
            gap: 1px;
            background: #ddd;
        }
        
        /* Left Sidebar */
        .left-sidebar {
            width: 300px;
            background: white;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #dee2e6;
        }
        
        .sidebar-header {
            padding: 15px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .sidebar-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        /* Search box */
        .search-box {
            width: 100%;
            padding: 6px 10px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-size: 13px;
            margin-bottom: 10px;
            box-sizing: border-box;
        }
        
        /* View controls */
        .view-controls {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }
        
        .view-btn {
            padding: 5px 10px;
            font-size: 11px;
            border: 1px solid #dee2e6;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .view-btn:hover {
            background: #e9ecef;
        }
        
        .view-btn.active {
            background: #0969da;
            color: white;
            border-color: #0969da;
        }
        
        /* Navigation list */
        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }
        
        .nav-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .nav-list li {
            padding: 8px;
            font-size: 13px;
            cursor: pointer;
            border-radius: 4px;
            margin-bottom: 2px;
            transition: background 0.2s;
            display: flex;
            align-items: center;
        }
        
        .nav-list li:hover {
            background: #f8f9fa;
        }
        
        .nav-list li.active {
            background: #e7f1ff;
            border-left: 3px solid #0969da;
            padding-left: 5px;
        }
        
        .nav-list .number {
            font-weight: 600;
            color: #0969da;
            margin-right: 6px;
        }
        
        .nav-list .year-tag {
            margin-left: auto;
            color: #999;
            font-size: 11px;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            background: white;
            padding: 40px;
            overflow-y: auto;
        }
        
        .content-header {
            margin-bottom: 30px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 20px;
        }
        
        .content-title {
            font-size: 32px;
            font-weight: bold;
            color: #1a1a1a;
            margin: 0 0 10px 0;
        }
        
        .content-meta {
            color: #666;
            font-size: 14px;
        }
        
        .content-body {
            line-height: 1.6;
            color: #333;
        }
        
        /* Right Panel - Relationships */
        .right-panel {
            width: 280px;
            background: white;
            border-left: 1px solid #dee2e6;
            display: flex;
            flex-direction: column;
        }
        
        .panel-header {
            padding: 15px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .panel-title {
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }
        
        .panel-content {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }
        
        /* Relationship sections */
        .relationship-section {
            margin-bottom: 20px;
        }
        
        .relationship-header {
            font-size: 12px;
            font-weight: 600;
            color: #666;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .relationship-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .relationship-item {
            padding: 8px;
            margin-bottom: 4px;
            background: #f8f9fa;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .relationship-item:hover {
            background: #e9ecef;
            transform: translateX(2px);
        }
        
        .relationship-item .doc-number {
            font-weight: 600;
            color: #0969da;
        }
        
        .relationship-item .doc-title {
            color: #333;
            display: block;
            font-size: 11px;
            margin-top: 2px;
        }
        
        /* Empty state */
        .empty-state {
            color: #999;
            font-size: 12px;
            font-style: italic;
            padding: 8px;
            text-align: center;
        }
        
        /* Grouped view */
        .decade-group {
            margin-bottom: 15px;
        }
        
        .decade-header {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        
        .decade-header .arrow {
            margin-right: 5px;
            transition: transform 0.2s;
            font-size: 10px;
        }
        
        .decade-header.collapsed .arrow {
            transform: rotate(-90deg);
        }
        
        .decade-items {
            margin-left: 15px;
        }
        
        .decade-items.collapsed {
            display: none;
        }
        
        /* Document action buttons */
        .document-actions {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e9ecef;
        }
        
        .action-btn {
            width: 100%;
            padding: 8px 12px;
            margin: 6px 0;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            background: #f8f9fa;
            border-color: #0969da;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .action-btn.primary {
            background: #0969da;
            color: white;
            border-color: #0969da;
        }
        
        .action-btn.primary:hover {
            background: #0550ae;
        }
        
        /* Enhanced relationship type indicators */
        .relationship-section {
            margin-bottom: 20px;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .relationship-section.amendments {
            border-left: 4px solid #d97706;
        }
        
        .relationship-section.references {
            border-left: 4px solid #0969da;
        }
        
        .relationship-section.interpretations {
            border-left: 4px solid #7c3aed;
        }
        
        .relationship-section.related {
            border-left: 4px solid #059669;
        }
        
        .relationship-section h5 {
            margin: 0 0 8px 0;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 8px 12px;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .relationship-section.amendments h5 {
            background: #fef3c7;
            color: #92400e;
        }
        
        .relationship-section.references h5 {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .relationship-section.interpretations h5 {
            background: #ede9fe;
            color: #6b21a8;
        }
        
        .relationship-section.related h5 {
            background: #d1fae5;
            color: #065f46;
        }
        
        /* Relationship type icons */
        .rel-icon {
            font-size: 14px;
        }
        
        /* Enhanced relationship items */
        .relationship-item {
            margin-bottom: 6px;
            border-radius: 4px;
            overflow: hidden;
            transition: all 0.2s;
        }
        
        .relationship-item:hover {
            transform: translateX(3px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .rel-link {
            display: block;
            padding: 10px 12px;
            background: #f8f9fa;
            border: 1px solid transparent;
            text-decoration: none;
            color: inherit;
            font-size: 12px;
            transition: all 0.2s;
            border-radius: 4px;
        }
        
        .rel-link:hover {
            background: white;
            border-color: #dee2e6;
            text-decoration: none;
        }
        
        .amendments .rel-link:hover {
            border-color: #d97706;
            box-shadow: 0 0 0 1px #d97706;
        }
        
        .references .rel-link:hover {
            border-color: #0969da;
            box-shadow: 0 0 0 1px #0969da;
        }
        
        .interpretations .rel-link:hover {
            border-color: #7c3aed;
            box-shadow: 0 0 0 1px #7c3aed;
        }
        
        .related .rel-link:hover {
            border-color: #059669;
            box-shadow: 0 0 0 1px #059669;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Left Sidebar -->
        <div class="left-sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">Ordinances</div>
                <input type="text" class="search-box" placeholder="Search ordinances..." id="searchBox">
                <div class="view-controls">
                    <button class="view-btn active" data-view="list">List</button>
                    <button class="view-btn" data-view="decade">By Decade</button>
                    <button class="view-btn" data-view="topic">By Topic</button>
                </div>
            </div>
            <div class="sidebar-content" id="sidebarContent">
                <ul class="nav-list" id="navList">
                    <!-- Items will be populated by JavaScript -->
                </ul>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <div class="content-header">
                <h1 class="content-title">Ordinance #70-2001 - WQRA</h1>
                <div class="content-meta">
                    Water Quality Resource Area Protection Ordinance<br>
                    Passed: November 8, 2001
                </div>
            </div>
            <div class="content-body">
                <h2>WATER QUALITY RESOURCE AREA PROTECTION</h2>
                <h3>ARTICLE 1. GENERAL</h3>
                <h4>1.1 Title</h4>
                <p>This ordinance shall be known as the City of Rivergrove Water Quality Resources Protection Ordinance and may be referred to herein as "this ordinance".</p>
                
                <h4>1.2 Purpose</h4>
                <p>The purpose of this ordinance is to protect and restore water quality resources and establish clear, objective development standards for properties that contain water quality resources or are adjacent to fish and wildlife habitat...</p>
                
                <h3>ARTICLE 2. DEFINITIONS</h3>
                <p>Unless specifically defined below, words or phrases used in this ordinance shall be interpreted to give them the same meaning as they have in common usage...</p>
                
                <p><em>(Document content continues...)</em></p>
            </div>
        </div>
        
        <!-- Right Panel -->
        <div class="right-panel">
            <div class="panel-header">
                <div class="panel-title">Document Relationships</div>
            </div>
            <div class="panel-content">
                <!-- Document Actions -->
                <div class="document-actions">
                    <button class="action-btn primary">
                        <span>📄</span> View Full Document
                    </button>
                    <button class="action-btn">
                        <span>📥</span> Download PDF
                    </button>
                    <button class="action-btn">
                        <span>🔗</span> Copy Link
                    </button>
                    <button class="action-btn">
                        <span>🔍</span> Search in Document
                    </button>
                </div>
                
                <!-- Amendments -->
                <div class="relationship-section amendments">
                    <h5><span class="rel-icon">⚡</span> Amended By</h5>
                    <ul class="relationship-list">
                        <li class="relationship-item">
                            <a href="#" class="rel-link">
                                <span class="rel-number">#88-2017</span>
                                <span class="rel-title">Docks Amendment</span>
                                <span class="rel-year">(2017)</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <!-- References This Document -->
                <div class="relationship-section references">
                    <h5><span class="rel-icon">📋</span> Referenced By</h5>
                    <ul class="relationship-list">
                        <li class="relationship-item">
                            <a href="#" class="rel-link">
                                <span class="rel-number">#71-2002</span>
                                <span class="rel-title">Gates Ordinance</span>
                                <span class="rel-year">(2002)</span>
                            </a>
                        </li>
                        <li class="relationship-item">
                            <a href="#" class="rel-link">
                                <span class="rel-number">#72-2002</span>
                                <span class="rel-title">Penalties & Abatement</span>
                                <span class="rel-year">(2002)</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <!-- Interpretations -->
                <div class="relationship-section interpretations">
                    <h5><span class="rel-icon">⚖️</span> Interpretations</h5>
                    <ul class="relationship-list">
                        <li class="relationship-item">
                            <a href="#" class="rel-link">
                                <span class="rel-number">2002-08-05</span>
                                <span class="rel-title">Lots Partially in Floodplain</span>
                                <span class="rel-year">(Aug 2002)</span>
                            </a>
                        </li>
                        <li class="relationship-item">
                            <a href="#" class="rel-link">
                                <span class="rel-number">1998-03-02</span>
                                <span class="rel-title">Section 5.080 Setbacks</span>
                                <span class="rel-year">(Mar 1998)</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <!-- Related Documents -->
                <div class="relationship-section related">
                    <h5><span class="rel-icon">🔗</span> Related Documents</h5>
                    <ul class="relationship-list">
                        <li class="relationship-item">
                            <a href="#" class="rel-link">
                                <span class="rel-number">#52-1987</span>
                                <span class="rel-title">Flood Damage Prevention</span>
                                <span class="rel-year">(1987)</span>
                            </a>
                        </li>
                        <li class="relationship-item">
                            <a href="#" class="rel-link">
                                <span class="rel-number">#62-1998</span>
                                <span class="rel-title">Flood & Land Development</span>
                                <span class="rel-year">(1998)</span>
                            </a>
                        </li>
                        <li class="relationship-item">
                            <a href="#" class="rel-link">
                                <span class="rel-number">#68-2000</span>
                                <span class="rel-title">Metro Compliance</span>
                                <span class="rel-year">(2000)</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Sample data
        const ordinances = [
            {num: '16', year: '1974', title: 'Parks Advisory Council', topic: 'Parks & Recreation'},
            {num: '28', year: '1978', title: 'Parks Amendment', topic: 'Parks & Recreation'},
            {num: '52', year: '1987', title: 'Flood Prevention', topic: 'Environmental'},
            {num: '57-93', year: '1993', title: 'Manufactured Homes', topic: 'Housing'},
            {num: '59-97A', year: '1998', title: 'Land Development', topic: 'Development'},
            {num: '61-98', year: '1998', title: 'Land Development Amendment', topic: 'Development'},
            {num: '62-98', year: '1998', title: 'Flood & Land Development', topic: 'Environmental'},
            {num: '68-2000', year: '2000', title: 'Metro Compliance', topic: 'Compliance'},
            {num: '69-2000', year: '2000', title: 'Title 3 Compliance', topic: 'Compliance'},
            {num: '70-2001', year: '2001', title: 'WQRA', topic: 'Environmental', active: true},
            {num: '71-2002', year: '2002', title: 'Gates', topic: 'Development'},
            {num: '72-2002', year: '2002', title: 'Penalties & Abatement', topic: 'Enforcement'},
            {num: '73-2003A', year: '2003', title: 'Conditional Use', topic: 'Development'},
            {num: '88-2017', year: '2017', title: 'Docks', topic: 'Environmental'}
        ];
        
        let currentView = 'list';
        let searchTerm = '';
        
        // Render list view
        function renderList() {
            const filtered = filterOrdinances();
            const html = filtered.map(ord => `
                <li class="${ord.active ? 'active' : ''}">
                    <span class="number">#${ord.num}</span>
                    <span>${ord.title}</span>
                    <span class="year-tag">${ord.year}</span>
                </li>
            `).join('');
            
            document.getElementById('navList').innerHTML = html;
        }
        
        // Render decade view
        function renderByDecade() {
            const filtered = filterOrdinances();
            const grouped = {};
            
            filtered.forEach(ord => {
                const decade = Math.floor(ord.year / 10) * 10;
                const key = `${decade}s`;
                if (!grouped[key]) grouped[key] = [];
                grouped[key].push(ord);
            });
            
            const html = Object.keys(grouped).sort().map(decade => `
                <div class="decade-group">
                    <div class="decade-header" onclick="toggleDecade(this)">
                        <span class="arrow">▼</span> ${decade}
                    </div>
                    <div class="decade-items">
                        <ul class="nav-list">
                            ${grouped[decade].map(ord => `
                                <li class="${ord.active ? 'active' : ''}">
                                    <span class="number">#${ord.num}</span>
                                    <span>${ord.title}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('sidebarContent').innerHTML = html;
        }
        
        // Render topic view
        function renderByTopic() {
            const filtered = filterOrdinances();
            const grouped = {};
            
            filtered.forEach(ord => {
                if (!grouped[ord.topic]) grouped[ord.topic] = [];
                grouped[ord.topic].push(ord);
            });
            
            const html = Object.keys(grouped).sort().map(topic => `
                <div class="decade-group">
                    <div class="decade-header" onclick="toggleDecade(this)">
                        <span class="arrow">▼</span> ${topic}
                    </div>
                    <div class="decade-items">
                        <ul class="nav-list">
                            ${grouped[topic].map(ord => `
                                <li class="${ord.active ? 'active' : ''}">
                                    <span class="number">#${ord.num}</span>
                                    <span>${ord.title}</span>
                                    <span class="year-tag">${ord.year}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('sidebarContent').innerHTML = html;
        }
        
        // Filter ordinances based on search
        function filterOrdinances() {
            if (!searchTerm) return ordinances;
            
            return ordinances.filter(ord => 
                ord.num.toLowerCase().includes(searchTerm) ||
                ord.title.toLowerCase().includes(searchTerm) ||
                ord.year.includes(searchTerm) ||
                ord.topic.toLowerCase().includes(searchTerm)
            );
        }
        
        // Toggle decade/topic group
        function toggleDecade(header) {
            header.classList.toggle('collapsed');
            header.nextElementSibling.classList.toggle('collapsed');
        }
        
        // Event handlers
        document.querySelectorAll('.view-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                currentView = e.target.dataset.view;
                
                // Reset sidebar content structure for list view
                if (currentView === 'list') {
                    document.getElementById('sidebarContent').innerHTML = '<ul class="nav-list" id="navList"></ul>';
                }
                
                switch(currentView) {
                    case 'list':
                        renderList();
                        break;
                    case 'decade':
                        renderByDecade();
                        break;
                    case 'topic':
                        renderByTopic();
                        break;
                }
            });
        });
        
        document.getElementById('searchBox').addEventListener('input', (e) => {
            searchTerm = e.target.value.toLowerCase();
            
            switch(currentView) {
                case 'list':
                    renderList();
                    break;
                case 'decade':
                    renderByDecade();
                    break;
                case 'topic':
                    renderByTopic();
                    break;
            }
        });
        
        // Action button functionality
        document.querySelectorAll('.action-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const text = this.textContent.trim();
                
                // Add click animation
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 150);
                
                // Show feedback based on button type
                if (text.includes('View Full Document')) {
                    showNotification('📄 Opening full document...', 'info');
                } else if (text.includes('Download PDF')) {
                    showNotification('📥 Downloading PDF...', 'success');
                } else if (text.includes('Copy Link')) {
                    showNotification('🔗 Link copied to clipboard!', 'success');
                    // Simulate copying to clipboard
                    navigator.clipboard?.writeText(window.location.href);
                } else if (text.includes('Search in Document')) {
                    showNotification('🔍 Opening document search...', 'info');
                }
            });
        });
        
        // Notification system
        function showNotification(message, type = 'info') {
            // Remove existing notification
            const existing = document.querySelector('.notification');
            if (existing) existing.remove();
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 20px;
                border-radius: 6px;
                font-size: 14px;
                font-weight: 500;
                z-index: 1000;
                animation: slideIn 0.3s ease-out;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                ${type === 'success' ? 'background: #10b981; color: white;' : 'background: #3b82f6; color: white;'}
            `;
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-in forwards';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // Add keyframes for notification animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
        
        // Initial render
        renderList();
    </script>
</body>
</html>